# AIå¾·å·æ‰‘å…‹å¤§æ¨¡å‹å¯¹æˆ˜ç³»ç»Ÿ - å¼€å‘æ–‡æ¡£

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
- [æŠ€æœ¯æ ˆä¸ä¾èµ–](#æŠ€æœ¯æ ˆä¸ä¾èµ–)
- [æ ¸å¿ƒç»„ä»¶è¯¦è§£](#æ ¸å¿ƒç»„ä»¶è¯¦è§£)
- [APIæ¥å£è®¾è®¡](#apiæ¥å£è®¾è®¡)
- [æ•°æ®æµç¨‹](#æ•°æ®æµç¨‹)
- [é…ç½®ç®¡ç†](#é…ç½®ç®¡ç†)
- [æ—¥å¿—ç³»ç»Ÿ](#æ—¥å¿—ç³»ç»Ÿ)
- [é”™è¯¯å¤„ç†](#é”™è¯¯å¤„ç†)
- [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
- [æ‰©å±•å¼€å‘](#æ‰©å±•å¼€å‘)
- [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)

## é¡¹ç›®æ¦‚è¿°

### ğŸ¯ é¡¹ç›®ç›®æ ‡
åŸºäºPyPokerEngineå’Œ302.AIå¹³å°ï¼Œå¼€å‘ä¸€ä¸ªæ”¯æŒå¤šä¸ªå¤§æ¨¡å‹åŒæ—¶å¯¹æˆ˜çš„å¾·å·æ‰‘å…‹AIç³»ç»Ÿï¼Œç”¨äºç ”ç©¶ä¸åŒAIæ¨¡å‹åœ¨å¤æ‚å†³ç­–åœºæ™¯ä¸‹çš„è¡¨ç°å·®å¼‚ã€‚

### ğŸ—ï¸ è®¾è®¡ç†å¿µ
- **æ¨¡å—åŒ–è®¾è®¡**: å„ç»„ä»¶èŒè´£æ¸…æ™°ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
- **å¯é…ç½®æ€§**: æ”¯æŒçµæ´»çš„æ¨¡å‹é…ç½®å’Œæ¸¸æˆå‚æ•°è°ƒæ•´
- **å¯è§‚æµ‹æ€§**: æä¾›è¯¦ç»†çš„æ—¥å¿—å’Œè°ƒè¯•ä¿¡æ¯
- **å®¹é”™æ€§**: å…·å¤‡å®Œå–„çš„é”™è¯¯å¤„ç†å’Œå¤‡ç”¨ç­–ç•¥
- **å¯æ‰©å±•æ€§**: æ˜“äºæ·»åŠ æ–°çš„AIæ¨¡å‹å’Œæ¸¸æˆè§„åˆ™

### ğŸ“Š æŠ€æœ¯æŒ‡æ ‡
- **æ”¯æŒæ¨¡å‹æ•°é‡**: 8ç§ä¸»æµå¤§æ¨¡å‹
- **å¹¶å‘ç©å®¶æ•°**: 2-10ä¸ªAIç©å®¶ï¼ˆæœ€å¤šæ”¯æŒ10äººæ¡Œæ»¡æ¡Œå¯¹æˆ˜ï¼‰
- **å“åº”æ—¶é—´**: å¹³å‡5-30ç§’/å†³ç­–ï¼ˆå–å†³äºæ¨¡å‹ï¼‰
- **æˆæœ¬ä¼°ç®—**: 10è½®æ¸¸æˆçº¦æ¶ˆè€—1.5 PTCï¼ˆçº¦1.5ç¾å…ƒï¼‰
- **ç¨³å®šæ€§**: æ”¯æŒé•¿æ—¶é—´è¿è¡Œï¼Œå…·å¤‡è‡ªåŠ¨æ¢å¤æœºåˆ¶

## ç³»ç»Ÿæ¶æ„

### ğŸ›ï¸ æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AIå¾·å·æ‰‘å…‹å¯¹æˆ˜ç³»ç»Ÿ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç”¨æˆ·ç•Œé¢å±‚ (Presentation Layer)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   demo.py   â”‚  â”‚quick_start.pyâ”‚  â”‚   æµ‹è¯•è„šæœ¬   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä¸šåŠ¡é€»è¾‘å±‚ (Business Logic Layer)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              AIPokerPlayer                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚  å†³ç­–å¼•æ“   â”‚  â”‚  çŠ¶æ€ç®¡ç†   â”‚  â”‚  å†å²è®°å½•   â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æœåŠ¡å±‚ (Service Layer)                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚   AI302Client   â”‚  â”‚      GameStateAnalyzer              â”‚â”‚
â”‚  â”‚                 â”‚  â”‚                                     â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚  â”‚ â”‚ APIè°ƒç”¨ç®¡ç† â”‚ â”‚  â”‚ â”‚ çŠ¶æ€è§£æå™¨  â”‚ â”‚   ç­–ç•¥åˆ†æå™¨    â”‚â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚  â”‚ â”‚ å“åº”è§£æå™¨  â”‚ â”‚  â”‚ â”‚ ä¿¡æ¯æå–å™¨  â”‚ â”‚   æ¨¡å¼è¯†åˆ«å™¨    â”‚â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ•°æ®è®¿é—®å±‚ (Data Access Layer)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ é…ç½®ç®¡ç†å™¨  â”‚  â”‚ æ—¥å¿—ç³»ç»Ÿ    â”‚  â”‚ ç¼“å­˜ç®¡ç†    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¤–éƒ¨æ¥å£å±‚ (External Interface Layer)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ PyPokerEngineâ”‚  â”‚            302.AI API                   â”‚â”‚
â”‚  â”‚             â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”‚ Claude  â”‚ â”‚ Gemini  â”‚ â”‚   GPT   â”‚   â”‚â”‚
â”‚  â”‚ â”‚æ¸¸æˆå¼•æ“ â”‚ â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”‚  Grok   â”‚ â”‚DeepSeek â”‚ â”‚  Qwen   â”‚   â”‚â”‚
â”‚  â”‚ â”‚è§„åˆ™å¼•æ“ â”‚ â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   GLM   â”‚ â”‚  Kimi   â”‚               â”‚â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”„ æ•°æ®æµå‘

```
ç”¨æˆ·è¾“å…¥ â†’ æ¸¸æˆé…ç½® â†’ PyPokerEngine â†’ AIPokerPlayer â†’ GameStateAnalyzer
    â†“                                                              â†“
æ¸¸æˆç»“æœ â† å†³ç­–æ‰§è¡Œ â† å†³ç­–å¤„ç† â† AI302Client â† çŠ¶æ€åˆ†æ â† ä¿¡æ¯æå–
    â†“                           â†“
æ—¥å¿—è¾“å‡º                    302.AI API
    â†“                           â†“
ç»Ÿè®¡åˆ†æ                    å¤§æ¨¡å‹å“åº”
```

## æŠ€æœ¯æ ˆä¸ä¾èµ–

### ğŸ› ï¸ æ ¸å¿ƒæŠ€æœ¯æ ˆ

| æŠ€æœ¯ç»„ä»¶ | ç‰ˆæœ¬ | ç”¨é€” | è¯´æ˜ |
|---------|------|------|------|
| Python | 3.8+ | ä¸»è¦å¼€å‘è¯­è¨€ | æ”¯æŒç±»å‹æç¤ºå’Œç°ä»£è¯­æ³• |
| PyPokerEngine | 1.0.1 | æ‰‘å…‹æ¸¸æˆå¼•æ“ | æä¾›å®Œæ•´çš„å¾·å·æ‰‘å…‹æ¸¸æˆé€»è¾‘ |
| requests | 2.31.0 | HTTPå®¢æˆ·ç«¯ | ç”¨äºè°ƒç”¨302.AI API |
| python-dotenv | 1.0.0 | ç¯å¢ƒå˜é‡ç®¡ç† | å®‰å…¨çš„é…ç½®ç®¡ç† |
| colorama | 0.4.6 | ç»ˆç«¯é¢œè‰²è¾“å‡º | å¢å¼ºç”¨æˆ·ç•Œé¢ä½“éªŒ |

### ğŸ“¦ ä¾èµ–å…³ç³»å›¾

```
ai_texas_holdem/
â”œâ”€â”€ PyPokerEngine (æ¸¸æˆå¼•æ“)
â”‚   â”œâ”€â”€ æ¸¸æˆè§„åˆ™å®ç°
â”‚   â”œâ”€â”€ ç©å®¶æ¥å£å®šä¹‰
â”‚   â””â”€â”€ çŠ¶æ€ç®¡ç†
â”œâ”€â”€ requests (HTTPå®¢æˆ·ç«¯)
â”‚   â”œâ”€â”€ APIè¯·æ±‚å‘é€
â”‚   â”œâ”€â”€ å“åº”å¤„ç†
â”‚   â””â”€â”€ é”™è¯¯å¤„ç†
â”œâ”€â”€ python-dotenv (é…ç½®ç®¡ç†)
â”‚   â”œâ”€â”€ ç¯å¢ƒå˜é‡åŠ è½½
â”‚   â””â”€â”€ é…ç½®å®‰å…¨æ€§
â””â”€â”€ colorama (ç•Œé¢ç¾åŒ–)
    â”œâ”€â”€ ç»ˆç«¯é¢œè‰²æ”¯æŒ
    â””â”€â”€ è·¨å¹³å°å…¼å®¹
```

### ğŸ”§ å¼€å‘å·¥å…·é“¾

```bash
# å¼€å‘ç¯å¢ƒè®¾ç½®
pip install -r requirements.txt

# ä»£ç è´¨é‡æ£€æŸ¥
pip install flake8 black mypy

# æµ‹è¯•æ¡†æ¶
pip install pytest pytest-cov

# æ–‡æ¡£ç”Ÿæˆ
pip install sphinx sphinx-rtd-theme
```

## æ ¸å¿ƒç»„ä»¶è¯¦è§£

### ğŸ® AIPokerPlayer (AIæ‰‘å…‹ç©å®¶)

**èŒè´£**: å®ç°åŸºäºå¤§æ¨¡å‹çš„æ‰‘å…‹AIç©å®¶é€»è¾‘

**æ ¸å¿ƒæ–¹æ³•**:

```python
class AIPokerPlayer(BasePokerPlayer):
    def __init__(self, name: str, model_type: str, debug: bool = True)
    def declare_action(self, valid_actions, hole_card, round_state) -> tuple
    def _process_ai_decision(self, decision, valid_actions) -> tuple
    def _fallback_strategy(self, valid_actions, hole_card, round_state) -> tuple
```

**è®¾è®¡æ¨¡å¼**: ç­–ç•¥æ¨¡å¼ + æ¨¡æ¿æ–¹æ³•æ¨¡å¼

**å…³é”®ç‰¹æ€§**:
- ç»§æ‰¿PyPokerEngineçš„BasePokerPlayer
- æ”¯æŒå¤šç§AIæ¨¡å‹åˆ‡æ¢
- å…·å¤‡å®Œå–„çš„é”™è¯¯å¤„ç†å’Œå¤‡ç”¨ç­–ç•¥
- æä¾›è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯è¾“å‡º
- è®°å½•å®Œæ•´çš„å†³ç­–å†å²

**çŠ¶æ€ç®¡ç†**:
```python
# ç©å®¶çŠ¶æ€
self.name: str              # ç©å®¶åç§°
self.model_type: str        # ä½¿ç”¨çš„AIæ¨¡å‹ç±»å‹
self.debug: bool           # è°ƒè¯•æ¨¡å¼å¼€å…³
self.ai_client: AI302Client # AIå®¢æˆ·ç«¯å®ä¾‹
self.game_history: List    # æ¸¸æˆå†å²è®°å½•
self.player_uuid: str      # ç©å®¶å”¯ä¸€æ ‡è¯†
```

### ğŸ¤– AI302Client (AIå®¢æˆ·ç«¯)

**èŒè´£**: å°è£…302.AI APIè°ƒç”¨é€»è¾‘ï¼Œæä¾›ç»Ÿä¸€çš„AIæ¨¡å‹æ¥å£

**æ ¸å¿ƒæ–¹æ³•**:
```python
class AI302Client:
    def __init__(self, model_type: str = "claude")
    def chat_completion(self, messages: list, **kwargs) -> Optional[str]
    def get_poker_decision(self, game_state: Dict, debug: bool = False) -> Optional[Dict]
    def _build_poker_prompt(self, game_state: Dict) -> str
    def _parse_text_decision(self, text: str) -> Optional[Dict]
```

**è®¾è®¡æ¨¡å¼**: é€‚é…å™¨æ¨¡å¼ + å·¥å‚æ¨¡å¼

**å…³é”®ç‰¹æ€§**:
- æ”¯æŒ8ç§ä¸åŒçš„AIæ¨¡å‹
- ç»Ÿä¸€çš„APIè°ƒç”¨æ¥å£
- æ™ºèƒ½çš„å“åº”è§£ææœºåˆ¶
- å®Œå–„çš„é”™è¯¯å¤„ç†å’Œé‡è¯•é€»è¾‘
- è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯è¾“å‡º

**APIè°ƒç”¨æµç¨‹**:
```
1. æ„å»ºæ¸¸æˆçŠ¶æ€prompt
2. å‘é€HTTPè¯·æ±‚åˆ°302.AI
3. æ¥æ”¶å¹¶è§£ææ¨¡å‹å“åº”
4. è½¬æ¢ä¸ºæ ‡å‡†å†³ç­–æ ¼å¼
5. éªŒè¯å†³ç­–æœ‰æ•ˆæ€§
6. è¿”å›æœ€ç»ˆå†³ç­–ç»“æœ
```

### ğŸ“Š GameStateAnalyzer (æ¸¸æˆçŠ¶æ€åˆ†æå™¨)

**èŒè´£**: è§£æPyPokerEngineçš„æ¸¸æˆçŠ¶æ€ï¼Œæå–AIå†³ç­–æ‰€éœ€çš„å…³é”®ä¿¡æ¯

**æ ¸å¿ƒæ–¹æ³•**:
```python
class GameStateAnalyzer:
    @staticmethod
    def extract_game_info(round_state, hole_card, valid_actions, player_uuid) -> Dict
    @staticmethod
    def _format_cards(cards: List) -> str
    @staticmethod
    def _analyze_opponents_actions(opponents, action_histories, current_street) -> List
    @staticmethod
    def get_hand_strength_description(hole_cards, community_cards) -> str
```

**è®¾è®¡æ¨¡å¼**: é™æ€å·¥å‚æ¨¡å¼ + ç­–ç•¥æ¨¡å¼

**å…³é”®ç‰¹æ€§**:
- é™æ€æ–¹æ³•è®¾è®¡ï¼Œæ— çŠ¶æ€æ“ä½œ
- æ™ºèƒ½çš„å¡ç‰Œæ ¼å¼åŒ–æ˜¾ç¤º
- å¯¹æ‰‹è¡ŒåŠ¨æ¨¡å¼åˆ†æ
- æ‰‹ç‰Œå¼ºåº¦è¯„ä¼°
- åº•æ± èµ”ç‡è®¡ç®—

**ä¿¡æ¯æå–æµç¨‹**:
```
PyPokerEngineçŠ¶æ€ â†’ ä¿¡æ¯æå– â†’ æ ¼å¼åŒ–å¤„ç† â†’ AIå¯ç†è§£æ ¼å¼
    â†“                â†“           â†“            â†“
round_state     â†’ åŸºç¡€ä¿¡æ¯   â†’ å¡ç‰Œæ˜¾ç¤º    â†’ game_info
hole_card       â†’ æ‰‹ç‰Œåˆ†æ   â†’ å¼ºåº¦è¯„ä¼°    â†’ å†³ç­–ä¾æ®
valid_actions   â†’ è¡ŒåŠ¨é€‰é¡¹   â†’ çº¦æŸæ£€æŸ¥    â†’ æœ‰æ•ˆå†³ç­–
opponents       â†’ å¯¹æ‰‹åˆ†æ   â†’ æ¨¡å¼è¯†åˆ«    â†’ ç­–ç•¥è°ƒæ•´
```

### âš™ï¸ é…ç½®ç®¡ç†ç³»ç»Ÿ

**æ–‡ä»¶**: `config.py`

**èŒè´£**: ç®¡ç†ç³»ç»Ÿé…ç½®ï¼ŒåŒ…æ‹¬APIå¯†é’¥ã€æ¨¡å‹å‚æ•°ã€æ¸¸æˆè®¾ç½®ç­‰

**é…ç½®ç»“æ„**:
```python
# APIé…ç½®
API_BASE_URL: str = "https://api.302.ai/v1"
API_KEY: str = os.getenv("API_302_KEY", "")

# æ¨¡å‹é…ç½®
SUPPORTED_MODELS: Dict[str, Dict] = {
    "claude": {
        "model_name": "claude-sonnet-4-5-20250929",
        "max_tokens": 200000,
        "temperature": 0.7
    },
    # ... å…¶ä»–æ¨¡å‹é…ç½®
}

# æ¸¸æˆé…ç½®
GAME_CONFIG: Dict[str, int] = {
    "max_round": 10,
    "initial_stack": 1000,
    "small_blind_amount": 10,
    "big_blind_amount": 20
}
```

**é…ç½®ç®¡ç†ç‰¹æ€§**:
- ç¯å¢ƒå˜é‡å®‰å…¨ç®¡ç†
- å¤šæ¨¡å‹å‚æ•°é…ç½®
- æ¸¸æˆè§„åˆ™å¯é…ç½®
- å¼€å‘/ç”Ÿäº§ç¯å¢ƒåˆ†ç¦»

## APIæ¥å£è®¾è®¡

### ğŸ”Œ 302.AI APIæ¥å£è§„èŒƒ

**åŸºç¡€é…ç½®**:
```python
BASE_URL = "https://api.302.ai/v1"
HEADERS = {
    "Authorization": f"Bearer {API_KEY}",
    "Content-Type": "application/json"
}
```

**è¯·æ±‚æ ¼å¼**:
```json
{
    "model": "claude-sonnet-4-5-20250929",
    "messages": [
        {
            "role": "system",
            "content": "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å¾·å·æ‰‘å…‹AIç©å®¶..."
        },
        {
            "role": "user", 
            "content": "å½“å‰å¾·å·æ‰‘å…‹æ¸¸æˆçŠ¶æ€ï¼š..."
        }
    ],
    "max_tokens": 200000,
    "temperature": 0.7
}
```

**å“åº”æ ¼å¼**:
```json
{
    "choices": [
        {
            "message": {
                "content": "{\"action\": \"raise\", \"amount\": 120}"
            }
        }
    ]
}
```

**é”™è¯¯å¤„ç†**:
```python
# HTTPçŠ¶æ€ç å¤„ç†
200: æˆåŠŸå“åº”
400: è¯·æ±‚å‚æ•°é”™è¯¯
401: APIå¯†é’¥æ— æ•ˆ
429: è¯·æ±‚é¢‘ç‡é™åˆ¶
500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

# ä¸šåŠ¡é€»è¾‘é”™è¯¯
- JSONè§£æå¤±è´¥
- å†³ç­–æ ¼å¼æ— æ•ˆ
- æ¨¡å‹å“åº”è¶…æ—¶
- ç½‘ç»œè¿æ¥å¼‚å¸¸
```

### ğŸ¯ å†³ç­–æ¥å£è§„èŒƒ

**è¾“å…¥æ ¼å¼** (game_state):
```python
{
    "hole_cards": "Aâ™  Kâ™¥",           # æ‰‹ç‰Œ
    "community_cards": "Jâ™£ 9â™  2â™¥",  # å…¬å…±ç‰Œ
    "street": "flop",                # å½“å‰è½®æ¬¡
    "my_stack": 940,                 # æˆ‘çš„ç­¹ç 
    "pot_size": 120,                 # åº•æ± å¤§å°
    "call_amount": 50,               # è·Ÿæ³¨é‡‘é¢
    "opponents": [...],              # å¯¹æ‰‹ä¿¡æ¯
    "valid_actions": [...]           # å¯é€‰è¡ŒåŠ¨
}
```

**è¾“å‡ºæ ¼å¼** (decision):
```python
{
    "action": "raise",  # è¡ŒåŠ¨ç±»å‹: fold/call/raise
    "amount": 120       # è¡ŒåŠ¨é‡‘é¢
}
```

## æ•°æ®æµç¨‹

### ğŸ”„ å®Œæ•´æ¸¸æˆæµç¨‹

```mermaid
sequenceDiagram
    participant U as User
    participant D as Demo
    participant P as AIPokerPlayer
    participant A as AI302Client
    participant G as GameStateAnalyzer
    participant E as PyPokerEngine
    participant API as 302.AI API

    U->>D: å¯åŠ¨æ¸¸æˆ
    D->>D: é€‰æ‹©AIæ¨¡å‹
    D->>P: åˆ›å»ºAIç©å®¶
    P->>A: åˆå§‹åŒ–AIå®¢æˆ·ç«¯
    D->>E: é…ç½®æ¸¸æˆè§„åˆ™
    E->>P: æ¸¸æˆå¼€å§‹æ¶ˆæ¯
    
    loop æ¯è½®æ¸¸æˆ
        E->>P: è½®æ¬¡å¼€å§‹
        E->>P: è¡—é“å¼€å§‹
        loop æ¯ä¸ªå†³ç­–ç‚¹
            E->>P: è¯·æ±‚è¡ŒåŠ¨å†³ç­–
            P->>G: åˆ†ææ¸¸æˆçŠ¶æ€
            G->>P: è¿”å›åˆ†æç»“æœ
            P->>A: è¯·æ±‚AIå†³ç­–
            A->>API: å‘é€å†³ç­–è¯·æ±‚
            API->>A: è¿”å›æ¨¡å‹å“åº”
            A->>A: è§£æå“åº”
            A->>P: è¿”å›å†³ç­–ç»“æœ
            P->>P: å¤„ç†å†³ç­–
            P->>E: æ‰§è¡Œè¡ŒåŠ¨
            E->>P: æ¸¸æˆçŠ¶æ€æ›´æ–°
        end
        E->>P: è½®æ¬¡ç»“æŸ
    end
    
    E->>D: æ¸¸æˆç»“æŸ
    D->>U: æ˜¾ç¤ºç»“æœ
```

### ğŸ“ˆ å†³ç­–æµç¨‹è¯¦è§£

```
1. æ¥æ”¶æ¸¸æˆçŠ¶æ€
   â”œâ”€â”€ round_state (è½®æ¬¡çŠ¶æ€)
   â”œâ”€â”€ hole_card (æ‰‹ç‰Œ)
   â”œâ”€â”€ valid_actions (å¯é€‰è¡ŒåŠ¨)
   â””â”€â”€ player_uuid (ç©å®¶æ ‡è¯†)

2. çŠ¶æ€åˆ†æå¤„ç†
   â”œâ”€â”€ æå–åŸºç¡€ä¿¡æ¯ (æ‰‹ç‰Œã€å…¬å…±ç‰Œã€ç­¹ç )
   â”œâ”€â”€ è®¡ç®—åº•æ± èµ”ç‡
   â”œâ”€â”€ åˆ†æå¯¹æ‰‹è¡Œä¸º
   â””â”€â”€ è¯„ä¼°æ‰‹ç‰Œå¼ºåº¦

3. æ„å»ºAIæç¤ºè¯
   â”œâ”€â”€ ç³»ç»Ÿè§’è‰²è®¾å®š
   â”œâ”€â”€ æ¸¸æˆçŠ¶æ€æè¿°
   â”œâ”€â”€ å†³ç­–è€ƒè™‘å› ç´ 
   â””â”€â”€ è¾“å‡ºæ ¼å¼è¦æ±‚

4. è°ƒç”¨AIæ¨¡å‹
   â”œâ”€â”€ å‘é€HTTPè¯·æ±‚
   â”œâ”€â”€ ç­‰å¾…æ¨¡å‹å“åº”
   â”œâ”€â”€ å¤„ç†ç½‘ç»œå¼‚å¸¸
   â””â”€â”€ è§£æå“åº”å†…å®¹

5. å†³ç­–ç»“æœå¤„ç†
   â”œâ”€â”€ JSONæ ¼å¼è§£æ
   â”œâ”€â”€ æ–‡æœ¬å†…å®¹æå–
   â”œâ”€â”€ å†³ç­–æœ‰æ•ˆæ€§éªŒè¯
   â””â”€â”€ é‡‘é¢èŒƒå›´è°ƒæ•´

6. æ‰§è¡Œæœ€ç»ˆè¡ŒåŠ¨
   â”œâ”€â”€ è¿”å›æ ‡å‡†æ ¼å¼
   â”œâ”€â”€ è®°å½•å†³ç­–å†å²
   â”œâ”€â”€ è¾“å‡ºè°ƒè¯•ä¿¡æ¯
   â””â”€â”€ è§¦å‘æ¸¸æˆå¼•æ“
```

## é…ç½®ç®¡ç†

### ğŸ”§ ç¯å¢ƒé…ç½®

**ç¯å¢ƒå˜é‡æ–‡ä»¶** (`.env`):
```bash
# 302.AI APIé…ç½®
API_302_KEY=your_302_ai_api_key_here

# å¯é€‰é…ç½®
API_BASE_URL=https://api.302.ai/v1
DEBUG_MODE=true
LOG_LEVEL=INFO
```

**é…ç½®åŠ è½½æœºåˆ¶**:
```python
from dotenv import load_dotenv
import os

# åŠ è½½ç¯å¢ƒå˜é‡
load_dotenv()

# è·å–é…ç½®å€¼
API_KEY = os.getenv("API_302_KEY", "")
DEBUG_MODE = os.getenv("DEBUG_MODE", "true").lower() == "true"
LOG_LEVEL = os.getenv("LOG_LEVEL", "INFO")
```

### ğŸ® æ¸¸æˆå‚æ•°é…ç½®

**é»˜è®¤é…ç½®**:
```python
GAME_CONFIG = {
    "max_round": 10,        # æœ€å¤§è½®æ•°
    "initial_stack": 1000,  # åˆå§‹ç­¹ç 
    "small_blind_amount": 10, # å°ç›²æ³¨
    "big_blind_amount": 20    # å¤§ç›²æ³¨ (è‡ªåŠ¨è®¡ç®—)
}
```

**åŠ¨æ€é…ç½®**:
```python
def setup_game_config(selected_models):
    """æ ¹æ®ç”¨æˆ·è¾“å…¥åŠ¨æ€é…ç½®æ¸¸æˆå‚æ•°"""
    config = GAME_CONFIG.copy()
    
    # ç”¨æˆ·è‡ªå®šä¹‰é…ç½®
    if not use_default_config():
        config['max_round'] = int(input("æœ€å¤§è½®æ•°: "))
        config['initial_stack'] = int(input("åˆå§‹ç­¹ç : "))
        config['small_blind_amount'] = int(input("å°ç›²æ³¨: "))
    
    return config
```

### ğŸ¤– æ¨¡å‹å‚æ•°é…ç½®

**æ¨¡å‹é…ç½®ç»“æ„**:
```python
MODEL_CONFIG_SCHEMA = {
    "model_name": str,      # æ¨¡å‹åç§°
    "max_tokens": int,      # æœ€å¤§tokenæ•°
    "temperature": float,   # æ¸©åº¦å‚æ•°
    "timeout": int,         # è¯·æ±‚è¶…æ—¶æ—¶é—´
    "retry_count": int,     # é‡è¯•æ¬¡æ•°
    "fallback_model": str   # å¤‡ç”¨æ¨¡å‹
}
```

**é…ç½®éªŒè¯**:
```python
def validate_model_config(config: Dict) -> bool:
    """éªŒè¯æ¨¡å‹é…ç½®çš„æœ‰æ•ˆæ€§"""
    required_fields = ["model_name", "max_tokens", "temperature"]
    
    for field in required_fields:
        if field not in config:
            raise ValueError(f"Missing required field: {field}")
    
    if config["max_tokens"] <= 0:
        raise ValueError("max_tokens must be positive")
    
    if not 0 <= config["temperature"] <= 2:
        raise ValueError("temperature must be between 0 and 2")
    
    return True
```

## æ—¥å¿—ç³»ç»Ÿ

### ğŸ“ æ—¥å¿—æ¶æ„è®¾è®¡

**æ—¥å¿—çº§åˆ«**:
```python
import logging

# æ—¥å¿—çº§åˆ«å®šä¹‰
CRITICAL = 50  # ä¸¥é‡é”™è¯¯ï¼Œç³»ç»Ÿæ— æ³•ç»§ç»­
ERROR = 40     # é”™è¯¯ï¼Œä½†ç³»ç»Ÿå¯ä»¥ç»§ç»­
WARNING = 30   # è­¦å‘Šï¼Œå¯èƒ½çš„é—®é¢˜
INFO = 20      # ä¸€èˆ¬ä¿¡æ¯
DEBUG = 10     # è°ƒè¯•ä¿¡æ¯
```

**æ—¥å¿—åˆ†ç±»**:
```
ğŸ“Š æ¸¸æˆæ—¥å¿— (Game Logs)
â”œâ”€â”€ æ¸¸æˆå¼€å§‹/ç»“æŸ
â”œâ”€â”€ è½®æ¬¡è¿›åº¦
â”œâ”€â”€ ç©å®¶è¡ŒåŠ¨
â””â”€â”€ ç»“æœç»Ÿè®¡

ğŸ¤– AIå†³ç­–æ—¥å¿— (AI Decision Logs)  
â”œâ”€â”€ çŠ¶æ€åˆ†æ
â”œâ”€â”€ Promptæ„å»º
â”œâ”€â”€ æ¨¡å‹å“åº”
â””â”€â”€ å†³ç­–å¤„ç†

ğŸ”§ ç³»ç»Ÿæ—¥å¿— (System Logs)
â”œâ”€â”€ APIè°ƒç”¨
â”œâ”€â”€ é”™è¯¯å¤„ç†
â”œâ”€â”€ æ€§èƒ½ç›‘æ§
â””â”€â”€ é…ç½®å˜æ›´

ğŸ› è°ƒè¯•æ—¥å¿— (Debug Logs)
â”œâ”€â”€ å˜é‡çŠ¶æ€
â”œâ”€â”€ æ‰§è¡Œæµç¨‹
â”œâ”€â”€ å¼‚å¸¸å †æ ˆ
â””â”€â”€ æ€§èƒ½æŒ‡æ ‡
```

### ğŸ¨ å¢å¼ºæ—¥å¿—è¾“å‡º

**è°ƒè¯•ä¿¡æ¯æ ¼å¼**:
```python
def _print_debug_info(self, game_state, messages, prompt):
    """æ‰“å°è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯"""
    print(f"\n{'='*80}")
    print(f"ğŸ¤– [{self.model_type.upper()}] AIå†³ç­–è°ƒè¯•ä¿¡æ¯")
    print(f"{'='*80}")
    
    # æ¸¸æˆçŠ¶æ€æ‘˜è¦
    print(f"ğŸ® æ¸¸æˆçŠ¶æ€æ‘˜è¦:")
    print(f"   æ‰‹ç‰Œ: {game_state.get('hole_cards', 'æœªçŸ¥')}")
    print(f"   å…¬å…±ç‰Œ: {game_state.get('community_cards', 'æ— ')}")
    # ... æ›´å¤šä¿¡æ¯
    
    # æ¨¡å‹é…ç½®
    print(f"\nğŸ”§ æ¨¡å‹é…ç½®:")
    print(f"   æ¨¡å‹åç§°: {self.model_config['model_name']}")
    print(f"   æœ€å¤§tokens: {self.model_config['max_tokens']}")
    
    # å®Œæ•´Prompt
    print(f"\nğŸ“ å‘é€ç»™æ¨¡å‹çš„å®Œæ•´Prompt:")
    print(f"{'â”€'*60}")
    print(prompt)
    print(f"{'â”€'*60}")
```

**æ€§èƒ½ç›‘æ§æ—¥å¿—**:
```python
import time
from functools import wraps

def log_performance(func):
    """æ€§èƒ½ç›‘æ§è£…é¥°å™¨"""
    @wraps(func)
    def wrapper(*args, **kwargs):
        start_time = time.time()
        result = func(*args, **kwargs)
        end_time = time.time()
        
        duration = end_time - start_time
        print(f"â±ï¸  {func.__name__} æ‰§è¡Œæ—¶é—´: {duration:.2f}ç§’")
        
        return result
    return wrapper
```

### ğŸ“Š æ—¥å¿—åˆ†æå·¥å…·

**å†³ç­–ç»Ÿè®¡åˆ†æ**:
```python
def analyze_decision_history(game_history: List[Dict]) -> Dict:
    """åˆ†æAIå†³ç­–å†å²"""
    stats = {
        'total_decisions': len(game_history),
        'action_distribution': {},
        'average_bet_size': 0,
        'win_rate': 0,
        'aggression_factor': 0
    }
    
    # ç»Ÿè®¡è¡ŒåŠ¨åˆ†å¸ƒ
    for record in game_history:
        action = record['final_action']
        stats['action_distribution'][action] = \
            stats['action_distribution'].get(action, 0) + 1
    
    # è®¡ç®—æ¿€è¿›å› å­
    raises = stats['action_distribution'].get('raise', 0)
    calls = stats['action_distribution'].get('call', 0)
    stats['aggression_factor'] = raises / max(calls, 1)
    
    return stats
```

## é”™è¯¯å¤„ç†

### ğŸ›¡ï¸ å¼‚å¸¸å¤„ç†ç­–ç•¥

**å¼‚å¸¸åˆ†ç±»**:
```python
# è‡ªå®šä¹‰å¼‚å¸¸ç±»
class PokerAIException(Exception):
    """æ‰‘å…‹AIåŸºç¡€å¼‚å¸¸"""
    pass

class APICallException(PokerAIException):
    """APIè°ƒç”¨å¼‚å¸¸"""
    pass

class DecisionParsingException(PokerAIException):
    """å†³ç­–è§£æå¼‚å¸¸"""
    pass

class GameStateException(PokerAIException):
    """æ¸¸æˆçŠ¶æ€å¼‚å¸¸"""
    pass

class ConfigurationException(PokerAIException):
    """é…ç½®å¼‚å¸¸"""
    pass
```

**é”™è¯¯å¤„ç†æµç¨‹**:
```python
def declare_action(self, valid_actions, hole_card, round_state):
    """å¸¦å®Œæ•´é”™è¯¯å¤„ç†çš„å†³ç­–æ–¹æ³•"""
    try:
        # ä¸»è¦å†³ç­–é€»è¾‘
        return self._make_ai_decision(valid_actions, hole_card, round_state)
        
    except APICallException as e:
        self._log_error(f"APIè°ƒç”¨å¤±è´¥: {e}")
        return self._fallback_strategy(valid_actions, hole_card, round_state)
        
    except DecisionParsingException as e:
        self._log_error(f"å†³ç­–è§£æå¤±è´¥: {e}")
        return self._fallback_strategy(valid_actions, hole_card, round_state)
        
    except Exception as e:
        self._log_error(f"æœªçŸ¥å¼‚å¸¸: {e}")
        return self._emergency_action(valid_actions)
```

**é‡è¯•æœºåˆ¶**:
```python
import time
from functools import wraps

def retry_on_failure(max_retries=3, delay=1.0, backoff=2.0):
    """é‡è¯•è£…é¥°å™¨"""
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            retries = 0
            current_delay = delay
            
            while retries < max_retries:
                try:
                    return func(*args, **kwargs)
                except Exception as e:
                    retries += 1
                    if retries >= max_retries:
                        raise e
                    
                    print(f"âš ï¸  ç¬¬{retries}æ¬¡é‡è¯•ï¼Œ{current_delay}ç§’åé‡è¯•...")
                    time.sleep(current_delay)
                    current_delay *= backoff
            
            return None
        return wrapper
    return decorator
```

### ğŸ”„ å¤‡ç”¨ç­–ç•¥ç³»ç»Ÿ

**ç­–ç•¥ä¼˜å…ˆçº§**:
```
1. AIæ¨¡å‹å†³ç­– (ä¸»ç­–ç•¥)
   â”œâ”€â”€ æˆåŠŸ â†’ æ‰§è¡Œå†³ç­–
   â””â”€â”€ å¤±è´¥ â†“

2. è§„åˆ™åŸºç¡€ç­–ç•¥ (å¤‡ç”¨ç­–ç•¥)
   â”œâ”€â”€ æ‰‹ç‰Œå¼ºåº¦è¯„ä¼°
   â”œâ”€â”€ åº•æ± èµ”ç‡è®¡ç®—
   â”œâ”€â”€ ç­¹ç ç®¡ç†
   â””â”€â”€ é£é™©æ§åˆ¶

3. ä¿å®ˆç­–ç•¥ (ç´§æ€¥ç­–ç•¥)
   â”œâ”€â”€ å¼ºç‰Œ â†’ è·Ÿæ³¨
   â”œâ”€â”€ ä¸­ç­‰ç‰Œ â†’ è·Ÿæ³¨(å°é¢)
   â””â”€â”€ å¼±ç‰Œ â†’ å¼ƒç‰Œ

4. é»˜è®¤è¡ŒåŠ¨ (æœ€åä¿éšœ)
   â””â”€â”€ å¼ƒç‰Œ (ç¡®ä¿æ¸¸æˆç»§ç»­)
```

**å¤‡ç”¨ç­–ç•¥å®ç°**:
```python
def _fallback_strategy(self, valid_actions, hole_card, round_state):
    """å¤šå±‚æ¬¡å¤‡ç”¨ç­–ç•¥"""
    try:
        # ç¬¬ä¸€å±‚ï¼šåŸºäºæ‰‹ç‰Œå¼ºåº¦çš„ç­–ç•¥
        return self._hand_strength_strategy(valid_actions, hole_card, round_state)
    except Exception:
        try:
            # ç¬¬äºŒå±‚ï¼šä¿å®ˆç­–ç•¥
            return self._conservative_strategy(valid_actions)
        except Exception:
            # ç¬¬ä¸‰å±‚ï¼šé»˜è®¤è¡ŒåŠ¨
            return self._default_action(valid_actions)

def _default_action(self, valid_actions):
    """é»˜è®¤è¡ŒåŠ¨ï¼šç¡®ä¿æ¸¸æˆèƒ½å¤Ÿç»§ç»­"""
    # ä¼˜å…ˆé€‰æ‹©å¼ƒç‰Œ
    for action in valid_actions:
        if action['action'] == 'fold':
            return 'fold', 0
    
    # å¦‚æœä¸èƒ½å¼ƒç‰Œï¼Œé€‰æ‹©ç¬¬ä¸€ä¸ªå¯ç”¨è¡ŒåŠ¨
    if valid_actions:
        first_action = valid_actions[0]
        return first_action['action'], first_action.get('amount', 0)
    
    # æœ€åçš„ä¿éšœ
    return 'fold', 0
```

## æ€§èƒ½ä¼˜åŒ–

### âš¡ å“åº”æ—¶é—´ä¼˜åŒ–

**å¼‚æ­¥å¤„ç†**:
```python
import asyncio
import aiohttp

class AsyncAI302Client:
    """å¼‚æ­¥AIå®¢æˆ·ç«¯"""
    
    async def async_chat_completion(self, messages, **kwargs):
        """å¼‚æ­¥APIè°ƒç”¨"""
        async with aiohttp.ClientSession() as session:
            async with session.post(
                f"{API_BASE_URL}/chat/completions",
                headers=self.headers,
                json=self._build_payload(messages, **kwargs),
                timeout=aiohttp.ClientTimeout(total=30)
            ) as response:
                if response.status == 200:
                    result = await response.json()
                    return result["choices"][0]["message"]["content"]
                return None
```

**ç¼“å­˜æœºåˆ¶**:
```python
from functools import lru_cache
import hashlib

class CachedGameStateAnalyzer:
    """å¸¦ç¼“å­˜çš„æ¸¸æˆçŠ¶æ€åˆ†æå™¨"""
    
    @lru_cache(maxsize=128)
    def _cached_hand_strength(self, hole_cards_str, community_cards_str):
        """ç¼“å­˜æ‰‹ç‰Œå¼ºåº¦è®¡ç®—ç»“æœ"""
        hole_cards = self._parse_cards(hole_cards_str)
        community_cards = self._parse_cards(community_cards_str)
        return self._calculate_hand_strength(hole_cards, community_cards)
    
    def get_hand_strength_description(self, hole_cards, community_cards):
        """ä½¿ç”¨ç¼“å­˜çš„æ‰‹ç‰Œå¼ºåº¦æè¿°"""
        hole_str = "|".join(hole_cards)
        community_str = "|".join(community_cards)
        return self._cached_hand_strength(hole_str, community_str)
```

**è¿æ¥æ± ä¼˜åŒ–**:
```python
import requests
from requests.adapters import HTTPAdapter
from urllib3.util.retry import Retry

class OptimizedAI302Client:
    """ä¼˜åŒ–çš„AIå®¢æˆ·ç«¯"""
    
    def __init__(self, model_type):
        self.session = requests.Session()
        
        # é…ç½®é‡è¯•ç­–ç•¥
        retry_strategy = Retry(
            total=3,
            backoff_factor=1,
            status_forcelist=[429, 500, 502, 503, 504],
        )
        
        # é…ç½®HTTPé€‚é…å™¨
        adapter = HTTPAdapter(
            max_retries=retry_strategy,
            pool_connections=10,
            pool_maxsize=20
        )
        
        self.session.mount("http://", adapter)
        self.session.mount("https://", adapter)
```

### ğŸ’¾ å†…å­˜ä¼˜åŒ–

**å¯¹è±¡æ± æ¨¡å¼**:
```python
class AIPlayerPool:
    """AIç©å®¶å¯¹è±¡æ± """
    
    def __init__(self, max_size=10):
        self._pool = []
        self._max_size = max_size
    
    def get_player(self, name, model_type, debug=True):
        """è·å–AIç©å®¶å®ä¾‹"""
        if self._pool:
            player = self._pool.pop()
            player.reset(name, model_type, debug)
            return player
        else:
            return AIPokerPlayer(name, model_type, debug)
    
    def return_player(self, player):
        """å½’è¿˜AIç©å®¶å®ä¾‹"""
        if len(self._pool) < self._max_size:
            player.cleanup()
            self._pool.append(player)
```

**å†…å­˜ç›‘æ§**:
```python
import psutil
import gc

def monitor_memory_usage():
    """ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µ"""
    process = psutil.Process()
    memory_info = process.memory_info()
    
    print(f"ğŸ“Š å†…å­˜ä½¿ç”¨æƒ…å†µ:")
    print(f"   RSS: {memory_info.rss / 1024 / 1024:.2f} MB")
    print(f"   VMS: {memory_info.vms / 1024 / 1024:.2f} MB")
    print(f"   å¯ç”¨å†…å­˜: {psutil.virtual_memory().available / 1024 / 1024:.2f} MB")
    
    # å¼ºåˆ¶åƒåœ¾å›æ”¶
    collected = gc.collect()
    print(f"   åƒåœ¾å›æ”¶: {collected} ä¸ªå¯¹è±¡")
```

## æ‰©å±•å¼€å‘

### ğŸ”Œ æ·»åŠ æ–°çš„AIæ¨¡å‹

**æ­¥éª¤1**: åœ¨é…ç½®ä¸­æ·»åŠ æ¨¡å‹
```python
# config.py
SUPPORTED_MODELS["new_model"] = {
    "model_name": "new-model-name",
    "max_tokens": 4096,
    "temperature": 0.7,
    "api_endpoint": "custom_endpoint",  # å¯é€‰
    "headers": {"Custom-Header": "value"}  # å¯é€‰
}
```

**æ­¥éª¤2**: æ‰©å±•å®¢æˆ·ç«¯æ”¯æŒ
```python
# ai_client.py
class AI302Client:
    def _get_api_endpoint(self):
        """è·å–APIç«¯ç‚¹"""
        return self.model_config.get("api_endpoint", f"{API_BASE_URL}/chat/completions")
    
    def _get_headers(self):
        """è·å–è¯·æ±‚å¤´"""
        headers = self.headers.copy()
        custom_headers = self.model_config.get("headers", {})
        headers.update(custom_headers)
        return headers
```

**æ­¥éª¤3**: æµ‹è¯•æ–°æ¨¡å‹
```python
# test/test_new_model.py
def test_new_model():
    """æµ‹è¯•æ–°æ¨¡å‹é›†æˆ"""
    client = AI302Client("new_model")
    
    test_game_state = {
        "hole_cards": "Aâ™  Kâ™¥",
        "community_cards": "Jâ™£ 9â™  2â™¥",
        # ... å…¶ä»–æµ‹è¯•æ•°æ®
    }
    
    decision = client.get_poker_decision(test_game_state, debug=True)
    assert decision is not None
    assert "action" in decision
    assert decision["action"] in ["fold", "call", "raise"]
```

### ğŸ® æ‰©å±•æ¸¸æˆè§„åˆ™

**æ·»åŠ æ–°çš„æ‰‘å…‹å˜ä½“**:
```python
# game_variants.py
class OmahaPokerPlayer(AIPokerPlayer):
    """å¥¥é©¬å“ˆæ‰‘å…‹AIç©å®¶"""
    
    def _analyze_omaha_hand(self, hole_cards, community_cards):
        """åˆ†æå¥¥é©¬å“ˆæ‰‹ç‰Œï¼ˆå¿…é¡»ä½¿ç”¨2å¼ æ‰‹ç‰Œ+3å¼ å…¬å…±ç‰Œï¼‰"""
        # å¥¥é©¬å“ˆç‰¹æ®Šè§„åˆ™å®ç°
        pass
    
    def _build_omaha_prompt(self, game_state):
        """æ„å»ºå¥¥é©¬å“ˆæ‰‘å…‹çš„ä¸“ç”¨prompt"""
        prompt = f"""
        å½“å‰å¥¥é©¬å“ˆæ‰‘å…‹æ¸¸æˆçŠ¶æ€ï¼š
        æ³¨æ„ï¼šå¥¥é©¬å“ˆæ‰‘å…‹å¿…é¡»ä½¿ç”¨æ°å¥½2å¼ æ‰‹ç‰Œå’Œ3å¼ å…¬å…±ç‰Œç»„æˆæœ€ä½³ç‰Œå‹
        
        æˆ‘çš„æ‰‹ç‰Œ: {game_state.get('hole_cards', 'æœªçŸ¥')} (4å¼ )
        å…¬å…±ç‰Œ: {game_state.get('community_cards', [])}
        ...
        """
        return prompt
```

**è‡ªå®šä¹‰å†³ç­–ç­–ç•¥**:
```python
# custom_strategies.py
class AggressiveStrategy:
    """æ¿€è¿›ç­–ç•¥"""
    
    @staticmethod
    def make_decision(game_state, valid_actions):
        """æ¿€è¿›çš„å†³ç­–é€»è¾‘"""
        # æ›´å€¾å‘äºåŠ æ³¨å’Œè·Ÿæ³¨
        for action in valid_actions:
            if action['action'] == 'raise':
                return 'raise', action['amount']['min']
        
        for action in valid_actions:
            if action['action'] == 'call':
                return 'call', action['amount']
        
        return 'fold', 0

class ConservativeStrategy:
    """ä¿å®ˆç­–ç•¥"""
    
    @staticmethod
    def make_decision(game_state, valid_actions):
        """ä¿å®ˆçš„å†³ç­–é€»è¾‘"""
        # åªåœ¨å¼ºç‰Œæ—¶æ‰åŠ æ³¨
        hand_strength = analyze_hand_strength(game_state)
        
        if hand_strength > 0.8:  # å¼ºç‰Œ
            for action in valid_actions:
                if action['action'] == 'raise':
                    return 'raise', action['amount']['min']
        
        if hand_strength > 0.5:  # ä¸­ç­‰ç‰Œ
            for action in valid_actions:
                if action['action'] == 'call':
                    return 'call', action['amount']
        
        return 'fold', 0
```

### ğŸ“Š æ•°æ®åˆ†ææ‰©å±•

**æ¸¸æˆæ•°æ®æ”¶é›†**:
```python
# analytics.py
class GameAnalytics:
    """æ¸¸æˆæ•°æ®åˆ†æ"""
    
    def __init__(self):
        self.game_data = []
        self.player_stats = {}
    
    def record_game(self, game_result, players):
        """è®°å½•æ¸¸æˆæ•°æ®"""
        game_record = {
            'timestamp': time.time(),
            'players': [p.name for p in players],
            'final_stacks': {p['name']: p['stack'] for p in game_result['players']},
            'total_rounds': game_result['rule']['max_round'],
            'decisions': self._collect_decisions(players)
        }
        self.game_data.append(game_record)
    
    def analyze_player_performance(self, player_name):
        """åˆ†æç©å®¶è¡¨ç°"""
        player_games = [g for g in self.game_data if player_name in g['players']]
        
        stats = {
            'total_games': len(player_games),
            'win_rate': self._calculate_win_rate(player_name, player_games),
            'avg_profit': self._calculate_avg_profit(player_name, player_games),
            'decision_patterns': self._analyze_decision_patterns(player_name, player_games)
        }
        
        return stats
    
    def generate_report(self):
        """ç”Ÿæˆåˆ†ææŠ¥å‘Š"""
        report = {
            'total_games': len(self.game_data),
            'player_rankings': self._rank_players(),
            'model_comparison': self._compare_models(),
            'performance_trends': self._analyze_trends()
        }
        
        return report
```

## éƒ¨ç½²æŒ‡å—

### ğŸš€ æœ¬åœ°éƒ¨ç½²

**ç¯å¢ƒå‡†å¤‡**:
```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd ai_texas_holdem

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
venv\Scripts\activate     # Windows

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 4. é…ç½®ç¯å¢ƒå˜é‡
cp env_example.txt .env
# ç¼–è¾‘.envæ–‡ä»¶ï¼Œæ·»åŠ APIå¯†é’¥

# 5. è¿è¡Œæµ‹è¯•
python test/test_basic.py

# 6. å¯åŠ¨æ¼”ç¤º
python demo.py
```

**ç›®å½•ç»“æ„**:
```
ai_texas_holdem/
â”œâ”€â”€ ai_client.py           # AIå®¢æˆ·ç«¯
â”œâ”€â”€ ai_poker_player.py     # AIç©å®¶
â”œâ”€â”€ config.py              # é…ç½®ç®¡ç†
â”œâ”€â”€ demo.py                # ä¸»æ¼”ç¤ºç¨‹åº
â”œâ”€â”€ game_state_analyzer.py # çŠ¶æ€åˆ†æå™¨
â”œâ”€â”€ quick_start.py         # å¿«é€Ÿå¯åŠ¨
â”œâ”€â”€ requirements.txt       # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ env_example.txt        # ç¯å¢ƒé…ç½®æ¨¡æ¿
â”œâ”€â”€ .env                   # ç¯å¢ƒé…ç½®æ–‡ä»¶ (éœ€åˆ›å»º)
â”œâ”€â”€ doc/                   # æ–‡æ¡£ç›®å½•
â”‚   â””â”€â”€ development_guide.md
â”œâ”€â”€ test/                  # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ test_basic.py
â”‚   â””â”€â”€ test_models.py
â””â”€â”€ logs/                  # æ—¥å¿—ç›®å½• (è‡ªåŠ¨åˆ›å»º)
```

### ğŸ³ Dockeréƒ¨ç½²

**Dockerfile**:
```dockerfile
FROM python:3.9-slim

WORKDIR /app

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y \
    gcc \
    && rm -rf /var/lib/apt/lists/*

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY requirements.txt .

# å®‰è£…Pythonä¾èµ–
RUN pip install --no-cache-dir -r requirements.txt

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . .

# åˆ›å»ºæ—¥å¿—ç›®å½•
RUN mkdir -p logs

# è®¾ç½®ç¯å¢ƒå˜é‡
ENV PYTHONPATH=/app
ENV PYTHONUNBUFFERED=1

# æš´éœ²ç«¯å£ (å¦‚æœéœ€è¦)
EXPOSE 8000

# å¯åŠ¨å‘½ä»¤
CMD ["python", "demo.py"]
```

**docker-compose.yml**:
```yaml
version: '3.8'

services:
  ai-poker:
    build: .
    container_name: ai-texas-holdem
    environment:
      - API_302_KEY=${API_302_KEY}
      - DEBUG_MODE=true
    volumes:
      - ./logs:/app/logs
      - ./.env:/app/.env
    stdin_open: true
    tty: true
    restart: unless-stopped
```

**éƒ¨ç½²å‘½ä»¤**:
```bash
# æ„å»ºé•œåƒ
docker-compose build

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# è¿›å…¥å®¹å™¨
docker-compose exec ai-poker bash

# åœæ­¢æœåŠ¡
docker-compose down
```

### â˜ï¸ äº‘ç«¯éƒ¨ç½²

**AWSéƒ¨ç½²ç¤ºä¾‹**:
```bash
# 1. åˆ›å»ºEC2å®ä¾‹
aws ec2 run-instances \
    --image-id ami-0abcdef1234567890 \
    --instance-type t3.medium \
    --key-name my-key-pair \
    --security-group-ids sg-903004f8

# 2. é…ç½®å®‰å…¨ç»„
aws ec2 authorize-security-group-ingress \
    --group-id sg-903004f8 \
    --protocol tcp \
    --port 22 \
    --cidr 0.0.0.0/0

# 3. è¿æ¥å®ä¾‹å¹¶éƒ¨ç½²
ssh -i my-key-pair.pem ec2-user@<instance-ip>
git clone <repository-url>
cd ai_texas_holdem
./deploy.sh
```

**éƒ¨ç½²è„šæœ¬** (`deploy.sh`):
```bash
#!/bin/bash

# æ›´æ–°ç³»ç»Ÿ
sudo yum update -y

# å®‰è£…Python 3.9
sudo yum install -y python39 python39-pip

# å®‰è£…é¡¹ç›®ä¾èµ–
pip3.9 install -r requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡
cp env_example.txt .env
echo "è¯·ç¼–è¾‘.envæ–‡ä»¶æ·»åŠ APIå¯†é’¥"

# åˆ›å»ºsystemdæœåŠ¡
sudo tee /etc/systemd/system/ai-poker.service > /dev/null <<EOF
[Unit]
Description=AI Texas Holdem Service
After=network.target

[Service]
Type=simple
User=ec2-user
WorkingDirectory=/home/ec2-user/ai_texas_holdem
ExecStart=/usr/bin/python3.9 demo.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF

# å¯åŠ¨æœåŠ¡
sudo systemctl daemon-reload
sudo systemctl enable ai-poker
sudo systemctl start ai-poker
```

### ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

**å¥åº·æ£€æŸ¥**:
```python
# health_check.py
import requests
import time
from config import API_KEY, API_BASE_URL

def check_api_health():
    """æ£€æŸ¥APIæœåŠ¡å¥åº·çŠ¶æ€"""
    try:
        response = requests.get(
            f"{API_BASE_URL}/models",
            headers={"Authorization": f"Bearer {API_KEY}"},
            timeout=10
        )
        return response.status_code == 200
    except Exception:
        return False

def check_system_resources():
    """æ£€æŸ¥ç³»ç»Ÿèµ„æº"""
    import psutil
    
    cpu_usage = psutil.cpu_percent(interval=1)
    memory_usage = psutil.virtual_memory().percent
    disk_usage = psutil.disk_usage('/').percent
    
    return {
        'cpu': cpu_usage,
        'memory': memory_usage,
        'disk': disk_usage,
        'healthy': cpu_usage < 80 and memory_usage < 80 and disk_usage < 90
    }

if __name__ == "__main__":
    print("ğŸ” ç³»ç»Ÿå¥åº·æ£€æŸ¥")
    print(f"APIçŠ¶æ€: {'âœ… æ­£å¸¸' if check_api_health() else 'âŒ å¼‚å¸¸'}")
    
    resources = check_system_resources()
    print(f"ç³»ç»Ÿèµ„æº: {'âœ… æ­£å¸¸' if resources['healthy'] else 'âš ï¸ è­¦å‘Š'}")
    print(f"  CPU: {resources['cpu']:.1f}%")
    print(f"  å†…å­˜: {resources['memory']:.1f}%")
    print(f"  ç£ç›˜: {resources['disk']:.1f}%")
```

**æ—¥å¿—è½®è½¬é…ç½®**:
```bash
# /etc/logrotate.d/ai-poker
/home/ec2-user/ai_texas_holdem/logs/*.log {
    daily
    missingok
    rotate 7
    compress
    delaycompress
    notifempty
    create 644 ec2-user ec2-user
    postrotate
        systemctl reload ai-poker
    endscript
}
```

---

## ğŸ“š æ€»ç»“

æœ¬å¼€å‘æ–‡æ¡£è¯¦ç»†ä»‹ç»äº†AIå¾·å·æ‰‘å…‹å¤§æ¨¡å‹å¯¹æˆ˜ç³»ç»Ÿçš„å®Œæ•´æ¶æ„ã€å®ç°ç»†èŠ‚å’Œéƒ¨ç½²æ–¹æ¡ˆã€‚ç³»ç»Ÿé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œå…·å¤‡è‰¯å¥½çš„å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œæ”¯æŒå¤šç§AIæ¨¡å‹çš„çµæ´»é…ç½®å’Œå¯¹æˆ˜ã€‚

### ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿

1. **æ¶æ„æ¸…æ™°**: åˆ†å±‚è®¾è®¡ï¼ŒèŒè´£æ˜ç¡®
2. **æ‰©å±•æ€§å¼º**: æ˜“äºæ·»åŠ æ–°æ¨¡å‹å’Œæ¸¸æˆè§„åˆ™
3. **å¯è§‚æµ‹æ€§**: è¯¦ç»†çš„æ—¥å¿—å’Œè°ƒè¯•ä¿¡æ¯
4. **å®¹é”™æ€§å¥½**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œå¤‡ç”¨ç­–ç•¥
5. **éƒ¨ç½²çµæ´»**: æ”¯æŒæœ¬åœ°ã€Dockerå’Œäº‘ç«¯éƒ¨ç½²

### ğŸš€ æœªæ¥å‘å±•

- æ”¯æŒæ›´å¤šæ‰‘å…‹å˜ä½“ï¼ˆå¥¥é©¬å“ˆã€ä¸ƒå¼ ç‰Œç­‰ï¼‰
- æ·»åŠ å®æ—¶å¯¹æˆ˜åŠŸèƒ½
- é›†æˆæ›´å¤šAIæ¨¡å‹æä¾›å•†
- å¼€å‘Webç•Œé¢
- å¢åŠ æ•°æ®åˆ†æå’Œå¯è§†åŒ–åŠŸèƒ½

é€šè¿‡æœ¬æ–‡æ¡£ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿç†è§£ç³»ç»Ÿæ¶æ„ï¼Œè¿›è¡ŒäºŒæ¬¡å¼€å‘å’ŒåŠŸèƒ½æ‰©å±•ã€‚
